# üî¥ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Redis

## üìã –û–±–∑–æ—Ä

Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Laravel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–ª—è:
- üöÄ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (sessions, cache, views)
- üì¨ **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á** (queue jobs, email sending)
- üíæ **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** (rate limiting, locks)

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redis

### üìÅ –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```bash
# Ubuntu/Debian
/etc/redis/redis.conf

# CentOS/RHEL
/etc/redis.conf

# –ü–æ–∏—Å–∫ –∫–æ–Ω—Ñ–∏–≥–∞
find /etc -name "*redis*" -type f 2>/dev/null
```

### üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
sudo nano /etc/redis/redis.conf
```

---

## üåê –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º (bind)

```ini
# –¢–æ–ª—å–∫–æ localhost (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
bind 127.0.0.1 ::1

# –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–û–ü–ê–°–ù–û –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã)
# bind 0.0.0.0

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞
# bind 192.168.1.100 10.0.0.1
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- `127.0.0.1` - IPv4 localhost
- `::1` - IPv6 localhost
- –ü—Ä–∏–≤—è–∑–∫–∞ —Ç–æ–ª—å–∫–æ –∫ localhost –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Redis –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —Å —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –ü–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```ini
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç Redis
port 6379

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ TCP –ø–æ—Ä—Ç–∞ (—Ç–æ–ª—å–∫–æ Unix socket)
# port 0
```

### Unix Socket (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ TCP)

```ini
# –ü—É—Ç—å –∫ Unix socket
# unixsocket /var/run/redis/redis.sock

# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ socket
# unixsocketperm 770
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Protected Mode

```ini
# –ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è yes)
protected-mode yes
```

**–ö–æ–≥–¥–∞ protected-mode –≤–∫–ª—é—á–µ–Ω:**
- Redis –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å localhost
- –ï—Å–ª–∏ bind –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, Redis —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ localhost
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–µ–∑ –ø–∞—Ä–æ–ª—è

### –ü–∞—Ä–æ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```ini
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω–∏—Ç—å)
# requirepass your_strong_password_here

# –ü—Ä–∏–º–µ—Ä:
requirepass MyStr0ngR3d1sP@ssw0rd2024
```

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä–æ–ª—è –≤ Laravel .env:**
```env
REDIS_PASSWORD=MyStr0ngR3d1sP@ssw0rd2024
```

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

```ini
# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command SHUTDOWN SHUTDOWN_SECRET_KEY
rename-command CONFIG CONFIG_SECRET_KEY

# –ò–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
# rename-command FLUSHDB FLUSH_DB_SAFE
```

---

## üíæ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (RDB)

```ini
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫
save 900 1      # –ï—Å–ª–∏ –∑–∞ 15 –º–∏–Ω—É—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è 1+ –∫–ª—é—á
save 300 10     # –ï—Å–ª–∏ –∑–∞ 5 –º–∏–Ω—É—Ç –∏–∑–º–µ–Ω–∏–ª–æ—Å—å 10+ –∫–ª—é—á–µ–π  
save 60 10000   # –ï—Å–ª–∏ –∑–∞ 1 –º–∏–Ω—É—Ç—É –∏–∑–º–µ–Ω–∏–ª–æ—Å—å 10000+ –∫–ª—é—á–µ–π

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
# save ""
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫:**

```ini
# –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—Ä–µ–¥–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
save 3600 1
save 1800 10
save 300 100

# –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—É–º–µ—Ä–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
save 900 1
save 300 10
save 60 10000

# –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—á–∞—Å—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
save 300 1
save 60 10
save 30 1000
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ RDB —Ñ–∞–π–ª–æ–≤

```ini
# –ò–º—è —Ñ–∞–π–ª–∞ –¥–∞–º–ø–∞
dbfilename dump.rdb

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
dir /var/lib/redis

# –°–∂–∞—Ç–∏–µ RDB —Ñ–∞–π–ª–æ–≤
rdbcompression yes

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
rdbchecksum yes

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
stop-writes-on-bgsave-error yes
```

### AOF (Append Only File) - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ RDB

```ini
# –í–∫–ª—é—á–µ–Ω–∏–µ AOF
appendonly yes

# –ò–º—è AOF —Ñ–∞–π–ª–∞
appendfilename "appendonly.aof"

# –ß–∞—Å—Ç–æ—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
appendfsync everysec    # –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
# appendfsync always    # –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–º–µ–¥–ª–µ–Ω–Ω–æ)
# appendfsync no        # –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –û–° (–±—ã—Å—Ç—Ä–æ, –Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ)

# –ü–µ—Ä–µ–∑–∞–ø–∏—Å—å AOF —Ñ–∞–π–ª–∞ –ø—Ä–∏ —Ä–æ—Å—Ç–µ
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
```

---

## üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

### –õ–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏

```ini
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏
maxmemory 256mb          # –î–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
# maxmemory 512mb        # –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤  
# maxmemory 1gb          # –î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

# –ü–æ–ª–∏—Ç–∏–∫–∞ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
maxmemory-policy allkeys-lru

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–∏ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–∏
maxmemory-samples 5
```

### –ü–æ–ª–∏—Ç–∏–∫–∏ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è (maxmemory-policy)

```ini
# –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π
allkeys-lru          # –£–¥–∞–ª—è–µ—Ç –Ω–∞–∏–º–µ–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏
allkeys-lfu          # –£–¥–∞–ª—è–µ—Ç –Ω–∞–∏–º–µ–Ω–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
allkeys-random       # –£–¥–∞–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∫–ª—é—á–∏

# –ü–æ–ª–∏—Ç–∏–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª—é—á–µ–π —Å TTL
volatile-lru         # LRU —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ –∫–ª—é—á–µ–π —Å expiration
volatile-lfu         # LFU —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ –∫–ª—é—á–µ–π —Å expiration  
volatile-random      # –°–ª—É—á–∞–π–Ω–æ —Å—Ä–µ–¥–∏ –∫–ª—é—á–µ–π —Å expiration
volatile-ttl         # –£–¥–∞–ª—è–µ—Ç –∫–ª—é—á–∏ —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º TTL

# –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è—Ç—å (–≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏)
noeviction
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Laravel:**
- `allkeys-lru` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä
- `volatile-lru` - –µ—Å–ª–∏ —á–µ—Ç–∫–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ TTL

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### TCP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```ini
# –†–∞–∑–º–µ—Ä TCP backlog
tcp-backlog 511

# TCP keepalive
tcp-keepalive 300

# –¢–∞–π–º–∞—É—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ (0 = –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞)
timeout 0
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

```ini
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
maxclients 10000

# –ë—É—Ñ–µ—Ä –≤—ã–≤–æ–¥–∞ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
client-output-buffer-limit normal 0 0 0

# –ë—É—Ñ–µ—Ä –¥–ª—è slave —Ä–µ–ø–ª–∏–∫
client-output-buffer-limit replica 256mb 64mb 60

# –ë—É—Ñ–µ—Ä –¥–ª—è pub/sub
client-output-buffer-limit pubsub 32mb 8mb 60
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```ini
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 16)
databases 16

# –ë–∞–∑–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Laravel
# DB 0 - cache
# DB 1 - sessions  
# DB 2 - queues
```

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```ini
# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤
loglevel notice

# –§–∞–π–ª –ª–æ–≥–æ–≤
logfile /var/log/redis/redis-server.log

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ syslog
# syslog-enabled yes
# syslog-ident redis
```

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `debug` - –º–∞–∫—Å–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- `verbose` - –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- `notice` - –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `warning` - —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏

### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```ini
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (–≤ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö)
slowlog-log-slower-than 10000  # 10ms

# –†–∞–∑–º–µ—Ä –ª–æ–≥–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
slowlog-max-len 128
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Laravel

### –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è production

```ini
# ================ –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ================

# –°–µ—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
bind 127.0.0.1 ::1
protected-mode yes
port 6379
tcp-backlog 511
timeout 0
tcp-keepalive 300

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
requirepass YourStrongPasswordHere2024

# ================ –ü–ê–ú–Ø–¢–¨ ================

# –õ–∏–º–∏—Ç –ø–∞–º—è—Ç–∏ (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ –≤–∞—à —Å–µ—Ä–≤–µ—Ä)
maxmemory 512mb
maxmemory-policy allkeys-lru
maxmemory-samples 5

# ================ –°–û–•–†–ê–ù–ï–ù–ò–ï ================

# RDB —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
save 900 1
save 300 10  
save 60 10000

# RDB –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
dir /var/lib/redis
stop-writes-on-bgsave-error yes

# AOF –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
appendonly no
appendfilename "appendonly.aof"
appendfsync everysec

# ================ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ ================

# –ö–ª–∏–µ–Ω—Ç—ã
maxclients 10000
databases 16

# –ë—É—Ñ–µ—Ä—ã
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# ================ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï ================

# –õ–æ–≥–∏
loglevel notice
logfile /var/log/redis/redis-server.log

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
slowlog-log-slower-than 10000
slowlog-max-len 128

# ================ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø ================

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command DEBUG ""
```

---

## üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Laravel –¥–ª—è Redis

### config/database.php

```php
'redis' => [
    'client' => env('REDIS_CLIENT', 'phpredis'),
    
    'options' => [
        'cluster' => env('REDIS_CLUSTER', 'redis'),
        'prefix' => env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),
    ],

    'default' => [
        'url' => env('REDIS_URL'),
        'host' => env('REDIS_HOST', '127.0.0.1'),
        'username' => env('REDIS_USERNAME'),
        'password' => env('REDIS_PASSWORD'),
        'port' => env('REDIS_PORT', '6379'),
        'database' => env('REDIS_DB', '0'),
    ],

    'cache' => [
        'url' => env('REDIS_URL'),
        'host' => env('REDIS_HOST', '127.0.0.1'),
        'username' => env('REDIS_USERNAME'),
        'password' => env('REDIS_PASSWORD'),
        'port' => env('REDIS_PORT', '6379'),
        'database' => env('REDIS_CACHE_DB', '1'),
    ],

    'session' => [
        'url' => env('REDIS_URL'),
        'host' => env('REDIS_HOST', '127.0.0.1'),
        'username' => env('REDIS_USERNAME'),
        'password' => env('REDIS_PASSWORD'),
        'port' => env('REDIS_PORT', '6379'),
        'database' => env('REDIS_SESSION_DB', '2'),
    ],

    'queue' => [
        'url' => env('REDIS_URL'),
        'host' => env('REDIS_HOST', '127.0.0.1'),
        'username' => env('REDIS_USERNAME'),
        'password' => env('REDIS_PASSWORD'),
        'port' => env('REDIS_PORT', '6379'),
        'database' => env('REDIS_QUEUE_DB', '3'),
    ],
],
```

### .env –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
# Redis –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=YourStrongPasswordHere2024
REDIS_PORT=6379

# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
REDIS_DB=0              # Default
REDIS_CACHE_DB=1        # Cache
REDIS_SESSION_DB=2      # Sessions  
REDIS_QUEUE_DB=3        # Queues

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redis
CACHE_STORE=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis
```

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Redis

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status redis-server

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
redis-cli ping

# –° –ø–∞—Ä–æ–ª–µ–º
redis-cli -a YourPassword ping

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
redis-cli info

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
redis-cli info memory

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥
redis-cli info commandstats

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
redis-cli slowlog get 10
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–∞–Ω–¥
redis-cli monitor

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
redis-cli --stat -i 2

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö
redis-cli client list

# –†–∞–∑–º–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
redis-cli info keyspace
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π (–û–°–¢–û–†–û–ñ–ù–û –Ω–∞ production!)
redis-cli keys "*"

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∫–ª—é—á–µ
redis-cli type cache:key
redis-cli ttl cache:key

# –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
redis-cli -n 1 flushdb

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
redis-cli bgsave

# –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
redis-cli lastsave

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –ª–µ—Ç—É
redis-cli config get "*"
redis-cli config set maxmemory 1gb
redis-cli config rewrite
```

---

## üö® Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. Redis –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo tail -f /var/log/redis/redis-server.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo redis-server /etc/redis/redis.conf --test-config

# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
sudo chown redis:redis /var/lib/redis
sudo chmod 755 /var/lib/redis
```

#### 2. –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Redis —Å–ª—É—à–∞–µ—Ç
sudo netstat -tulpn | grep :6379

# –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
telnet 127.0.0.1 6379

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é

```bash
# –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
redis-cli info memory

# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–∞–º—è—Ç–∏
redis-cli memory purge

# –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
redis-cli --bigkeys
```

#### 4. –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

```bash
# –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
redis-cli slowlog get 20

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
redis-cli info stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
top -p $(pgrep redis-server)
```

---

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤

#### –ú–∞–ª—ã–π –ø—Ä–æ–µ–∫—Ç (< 10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```ini
maxmemory 256mb
maxmemory-policy allkeys-lru
save 900 1 300 10 60 1000
maxclients 1000
```

#### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–µ–∫—Ç (10k-100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```ini
maxmemory 1gb
maxmemory-policy allkeys-lru  
save 600 1 300 10 60 10000
maxclients 5000
appendonly yes
```

#### –ë–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç (100k+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```ini
maxmemory 4gb
maxmemory-policy allkeys-lru
save 300 1 60 10 30 10000
maxclients 20000
appendonly yes
tcp-backlog 2048
```

### –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TTL** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø–∞–º—è—Ç—å** —Ä–µ–≥—É–ª—è—Ä–Ω–æ
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–†–∞–∑–¥–µ–ª—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** –ø–æ –±–∞–∑–∞–º (cache, sessions, queues)
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ** –±–æ–ª—å—à–∏–µ –∫–ª—é—á–∏

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Laravel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ** (bind, protected-mode, –ø–∞—Ä–æ–ª–∏)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** (maxmemory, eviction policy)
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** (save, AOF –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (–ª–æ–≥–∏, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –º–µ—Ç—Ä–∏–∫–∏)
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É

–° —ç—Ç–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Redis –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ production —Å—Ä–µ–¥–µ! üöÄ
