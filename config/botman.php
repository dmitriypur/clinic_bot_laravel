<?php

/**
 * Конфигурация BotMan framework для Telegram бота
 *
 * Этот файл настраивает:
 * - Подключение к Telegram API
 * - Файловое хранилище для состояний диалогов
 * - Кеширование данных бота
 */

return [
    'telegram' => [
        'token' => env('TELEGRAM_TOKEN'),
        'username' => env('TELEGRAM_BOT_USERNAME', 'medical_center_test_bot'),
        'webhook_url' => env('TELEGRAM_WEBHOOK_URL'),
    ],
    /*
    |--------------------------------------------------------------------------
    | Драйверы мессенджеров
    |--------------------------------------------------------------------------
    |
    | Настройки подключения к различным мессенджерам.
    | В нашем случае используется только Telegram.
    | Токен бота получается от @BotFather в Telegram.
    |
    */
    'drivers' => [
        'telegram' => [
            'token' => env('TELEGRAM_TOKEN'), // Токен из .env файла
            'username' => env('TELEGRAM_BOT_USERNAME', 'medical_center_test_bot'), // Username бота
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Хранилище данных сопоставления (Matching Data)
    |--------------------------------------------------------------------------
    |
    | Используется для сохранения временных данных сопоставления команд
    | и паттернов сообщений. Файловое хранилище подходит для небольших проектов.
    |
    */
    'matchingdata' => [
        'driver' => 'file',
        'config' => [
            'path' => storage_path('botman'), // storage/botman/
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Хранилище информации о пользователях
    |--------------------------------------------------------------------------
    |
    | Сохраняет состояния диалогов (Conversations) пользователей.
    | Каждый активный диалог сохраняется в отдельный файл.
    | Формат файлов: user_Telegram_{user_id}.json
    |
    */
    'userinfo' => [
        'driver' => 'file',
        'config' => [
            'path' => storage_path('botman'), // storage/botman/
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Кеш хранилище
    |--------------------------------------------------------------------------
    |
    | Временное хранилище для кеширования данных бота.
    | Используется для оптимизации производительности.
    | Автоматически очищается при перезапуске.
    |
    */
    'cache' => [
        'driver' => 'file',
        'config' => [
            'path' => storage_path('botman/cache'), // storage/botman/cache/
        ],
    ],
];
